% \setmainfont{Constantia}
% \setsansfont{Calibri}
\newcommand{\headingfont}{\sffamily}
\titleformat{\chapter}[block]{\raggedright\headingfont\large\bfseries}{}{0pt}{\huge{#1}}
\titleformat{\section}{\headingfont\large\bfseries}{\thesection}{1em}{\large{#1}}
\titleformat{\subsection}{\headingfont\large\bfseries}{\thesubsection}{1em}{\large{#1}}
\titleformat{\subsubsection}{\headingfont\normalsize\bfseries}{\thesubsubsection}{1em}{#1}

\geometry{a4paper,top=3cm,bottom=3cm}

\graphicspath{{images/}}
\captionsetup{format=hang,margin=1cm}

\addbibresource{references.bib}

\let\oldchapter\chapter
\newcommand{\appendixchapter}[1]{\oldchapter[Appendix \thechapter: #1]{#1}}

\makeatletter
\patchcmd{\@chapter}{\addtocontents{lof}{\protect\addvspace{10\p@}}}{}{}{}
\patchcmd{\@chapter}{\addtocontents{lot}{\protect\addvspace{10\p@}}}{}{}{}
\makeatother

\renewcommand{\sectionmark}[1]{\markright{\thesection~- ~#1}}
\renewcommand{\chaptermark}[1]{\markboth{\chaptername~\thechapter~-~ #1}{}}

\newcommand{\frontmaterial}%
    {%
        \clearpage%
        \renewcommand{\thepage}{\Roman{page}}%
        \pagestyle{fancy}%
        \fancyhf{}%
        \lhead{}%
        \renewcommand{\headrulewidth}{0pt}%
        \rfoot{Page \thepage}%
        \fancypagestyle{plain}%
            {%
                \fancyhf{}%
                \renewcommand{\headrulewidth}{0pt}%
                \rfoot{Page \thepage}%
            }%
    }

\newcommand{\mainmaterial}%
    {%
        \clearpage%
        \pagenumbering{arabic}%
        \setcounter{figure}{0}%
        \setcounter{table}{0}%
        \pagestyle{fancy}%
        \fancyhf{}%
        \lhead{}%
        \renewcommand{\headrulewidth}{0pt}%
        \lfoot{\parbox[t]{0.8\textwidth}{\leftmark}}%
        \rfoot{Page \thepage}%
        \fancypagestyle{plain}%
            {%
                \fancyhf{}%
                \renewcommand{\headrulewidth}{0pt}%
                \lfoot{\parbox[t]{0.8\textwidth}{\leftmark}}%
                \rfoot{Page \thepage}%
            }%
    }

\renewcommand\labelitemi{\textbf{--}}

\lstset{
  frame=none,
  xleftmargin=2pt,
  stepnumber=1,
  numbers=left,
  numbersep=5pt,
  numberstyle=\ttfamily\tiny\color[gray]{0.3},
  belowcaptionskip=\bigskipamount,
  captionpos=b,
  escapeinside={*'}{'*},
  language=haskell,
  tabsize=2,
  emphstyle={\bf},
  commentstyle=\it,
  stringstyle=\mdseries\rmfamily,
  showspaces=false,
  keywordstyle=\bfseries\rmfamily,
  basicstyle=\small\sffamily,
  showstringspaces=false,
  morecomment=[l]\%,
}
